<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mission 01: Security Grid</title>
  <link rel="stylesheet" href="styles3.css">
</head>
<body class="game-screen">
  <div class="game-container">
    <div class="game-header">
      <button class="back-btn" onclick="window.location.href='index1.html'">‚Üê ABORT MISSION</button>
      <h1>üéØ MISSION 01: SECURITY GRID</h1>
      <div class="timer" id="timer">00:00</div>
    </div>

    <div class="game-instructions">
      <h3>OBJECTIVE:</h3>
      <p>Deploy exactly <strong>6 surveillance cameras</strong> on the grid.</p>
      <p>‚ö†Ô∏è CONSTRAINTS:</p>
      <ul>
        <li>One camera per <strong>row</strong></li>
        <li>One camera per <strong>column</strong></li>
        <li>One camera per <strong>colored region</strong></li>
        <li>No two cameras can threaten each other (including diagonals)</li>
      </ul>
    </div>

    <div class="grid-container" id="grid-container"></div>

    <div class="game-controls">
      <button class="verify-btn" onclick="verifyGrid()">VERIFY SOLUTION</button>
      <button class="reset-btn" onclick="resetGrid()">RESET GRID</button>
    </div>

    <div class="result-display" id="result"></div>
  </div>

  <script src="mission-control.js"></script>
  <script>
    class SecurityGrid {
      constructor(size = 6) {
        this.size = size;
        this.regions = this.generateRegions();
        this.solution = [];
        this.generateSolution();
        this.cameras = new Set();
      }

      generateRegions() {
        // Create 6 irregular regions
        const regions = Array(36).fill(0);
        const regionSizes = Array(6).fill(0);
        const maxRegionSize = 6;

        // Start each region from a random seed
        const seeds = [];
        while (seeds.length < 6) {
          const seed = Math.floor(Math.random() * 36);
          if (!seeds.includes(seed)) seeds.push(seed);
        }

        // Flood fill from each seed
        seeds.forEach((seed, regionId) => {
          const queue = [seed];
          
          while (queue.length > 0 && regionSizes[regionId] < maxRegionSize) {
            const current = queue.shift();
            
            if (regions[current] !== 0) continue;
            
            regions[current] = regionId + 1;
            regionSizes[regionId]++;

            // Add unassigned neighbors
            const neighbors = this.getNeighbors(current);
            queue.push(...neighbors.filter(n => regions[n] === 0 && !queue.includes(n)));
          }
        });

        return regions;
      }

      getNeighbors(index) {
        const row = Math.floor(index / this.size);
        const col = index % this.size;
        const neighbors = [];

        if (row > 0) neighbors.push(index - this.size);
        if (row < this.size - 1) neighbors.push(index + this.size);
        if (col > 0) neighbors.push(index - 1);
        if (col < this.size - 1) neighbors.push(index + 1);

        return neighbors;
      }

      generateSolution() {
        // Backtracking to find valid camera placement
        const placed = [];
        const usedRows = new Set();
        const usedCols = new Set();
        const usedRegions = new Set();

        const backtrack = (regionId) => {
          if (regionId >= this.size) return true;

          const regionCells = this.regions
